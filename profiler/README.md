# Blog Post: "More Than You Ever Wanted to Know About Yatzy"

Interactive long-form post with 8 D3.js charts. Runs as a static site — no build step, no framework.

## Quick Start

```bash
python3 -m http.server 8080 -d blog/
# open http://localhost:8080
```

## File Structure

```
blog/
  index.html                  # Thin shell: <head>, theme toggle, fetches sections
  sections/                   # HTML fragments assembled at runtime
    header.html               # Post title, subtitle, table of contents
    01-rules.html             # How Scandinavian Yatzy Works
    02-solving.html           # Can You Play Optimal Yatzy?
    03-distribution.html      # The Distribution Is Not What You Think
    04-risk.html              # What If You Could Choose Your Risk?
    05-decisions.html         # How Decisions Change with Risk
    06-human-gap.html         # The 82-Point Gap
    07-compression.html       # How Small Can a Yatzy Brain Be?
    08-multiplayer.html       # Playing Against Someone Else
    09-negative-results.html  # Things That Don't Work
    10-conclusion.html        # What We Learned
  css/
    style.css                 # Layout, typography, dark mode
    charts.css                # Chart containers, tooltips, controls
  js/
    yatzy-viz.js              # Shared D3 utilities (axes, tooltips, colors, dice SVGs)
    data-loader.js            # Centralized JSON fetch with caching
    charts/
      score-distribution.js   # Density slider across theta values
      mixture-decomposition.js # Four-component Gaussian mixture build-up
      mean-variance.js        # Efficient frontier scatter
      risk-reward.js          # Percentile curves vs theta with draggable cursor
      decision-explorer.js    # Scenario cards with dice and action tables
      heuristic-gap.js        # Mistake pattern bar chart with cumulative line
      surrogate-pareto.js     # Model size vs game performance scatter
      win-rate.js             # Head-to-head win rate curve
  data/                       # Pre-built JSON (generated by convert.py)
    sweep_summary.json        # Per-theta stats: mean, std, percentiles (37 rows)
    mixture.json              # Four sub-population parameters (hardcoded)
    percentile_peaks.json     # Optimal theta per percentile
    heuristic_gap.json        # Top mistake patterns and EV loss breakdown
    game_eval.json            # Surrogate model game-level results
    winrate.json              # Head-to-head win rates vs EV-optimal
    category_stats_theta0.json # Per-category scoring stats at theta=0
  convert.py                  # Converts outputs/ CSV/JSON → blog/data/ JSON
```

## How It Works

### Section Assembly

`index.html` is a shell that fetches all 11 section HTML fragments via `Promise.all`, joins them, and inserts them into `#sections-root`. Each section file is a raw HTML fragment (no `<html>`, `<head>`, or `<script>` tags) — just `<section>` content plus a trailing `<hr class="divider">`.

### Chart Initialization

Charts are lazy-loaded via `IntersectionObserver` with a 200px root margin. Each chart module exports a single `init` function that fetches its data, builds the D3 visualization, and binds interaction handlers. On dark mode toggle, all charts re-initialize.

### Data Pipeline

The `data/` JSON files are derived from the main project's `outputs/` directory:

```bash
python3 blog/convert.py
```

This reads from:
- `outputs/aggregates/parquet/sweep_summary.csv` → `sweep_summary.json`
- `outputs/aggregates/csv/percentile_peaks.csv` → `percentile_peaks.json`
- `outputs/aggregates/csv/category_stats.csv` → `category_stats_theta0.json`
- `outputs/winrate/winrate_results.csv` → `winrate.json`
- `outputs/surrogate/game_eval_results.json` → `game_eval.json`
- `outputs/heuristic_gap/heuristic_gap_summary.json` → `heuristic_gap.json`
- Hardcoded mixture parameters → `mixture.json`

Run the upstream pipelines first if these source files don't exist (see main project README).

## Chart → Data Dependencies

| Chart module | Data file(s) |
|---|---|
| `score-distribution.js` | `sweep_summary.json` |
| `mixture-decomposition.js` | `mixture.json` |
| `mean-variance.js` | `sweep_summary.json` |
| `risk-reward.js` | `sweep_summary.json`, `percentile_peaks.json` |
| `decision-explorer.js` | (scenarios hardcoded in JS) |
| `heuristic-gap.js` | `heuristic_gap.json` |
| `surrogate-pareto.js` | `game_eval.json` |
| `win-rate.js` | `winrate.json` |

## Editing Sections

Edit any `sections/*.html` file and reload `index.html`. No build step. The fragments are pure HTML — just content inside `<section>` tags.

To add a new section:
1. Create `sections/NN-slug.html` with a `<section id="slug">` and trailing `<hr class="divider">`
2. Add the filename to the `sectionFiles` array in `index.html`
3. Add a ToC entry in `sections/header.html`

## Dependencies

- [D3.js v7](https://d3js.org/) (loaded from CDN)
- [Newsreader](https://fonts.google.com/specimen/Newsreader) font (loaded from Google Fonts)
- No build tools, no npm, no bundler
